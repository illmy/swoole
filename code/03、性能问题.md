# 性能问题

无状态模型的一个问题是它浪费了资源来重建上下文来服务每个请求。这可
能包括建立新的连接到远程服务和从数据库中获取数据。这些过程可能有多
轮。    

在无状态模型中，有很多资源被浪费在建立执行上下文和建立依赖数据来处
理实际的请求逻辑上。  
通过 Swoole PHP 转为部分有状态模式，我们可以看到平均 2 倍-5 倍的性
能提升。这种性能的提升已经得到了全球多个团队和多个不同项目的验证。

当大家看自己系统的问题，可能是并发问题，也可能是性能问题。如果你的
系统内部没有高并发的问题，那么 coroutines 和 async I/O 可能对问题的解
决没有太大的帮助。所以，首先要找出问题的瓶颈和根本原因，是并发 I/O
造成的问题，还是仅仅因为重建状态浪费 CPU 和其他资源造成的。
虽然 coroutines 和 async I/O 是大多数人在使用 Swoole PHP 时的主要功
能，但通过使用部分状态服务器来节省成本，为企业带来了直接的成本降
低。
当我们审视我们的系统时，请思考以下问题？

1. 我们不重用可重用的变量，是否在浪费资源？
2. 我们每次请求都会从数据库中请求相同的没有变化的数据吗？
3. 我们是否在请求当前请求没有使用的数据？
4. 我们是否可以将远程数据缓存到本地？
5. 我们是否可以使用异步 I/O 而不是阻塞 I/O 来节省进程数量？
6. 我们是否可以将重任务推迟，将它们送入队列，另外执行？
7. 等等。

性能问题与如何管理本地或远程的状态以及访问状态的
成本有关。